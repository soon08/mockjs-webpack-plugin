"use strict";var express=require("express"),watch=require("watch"),_require=require("./util"),cleanCache=_require.cleanCache,ROUTE_PATH="./routes.js",_require2=require(ROUTE_PATH),mock=_require2.mock;module.exports=function(e){var r=e.path,s=e.port,c=(void 0===s?3e3:s)||3e3,o=express();o.use("/",mock(r)),watch.watchTree(r,function(){cleanCache(require.resolve(ROUTE_PATH));try{mock=require(ROUTE_PATH),console.info("Mock module update success.")}catch(e){console.error("Mock module update failed, please restart the application. %s",e)}});var t=o.listen(c,function(){var e=t.address().address,r=t.address().port;console.log("Mock server listening at http://%s:%s",e,r)})};